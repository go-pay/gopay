# pay-gateway
PAY_GATEWAY_PORT=8088
PAY_GATEWAY_CONFIG=/config/pay-gateway.json
# PAY_GATEWAY_ADDR=:8088

# Optional runtime overrides
PAY_GATEWAY_PUBLIC_BASE_URL=https://pay.example.com
PAY_GATEWAY_DEFAULT_TENANT_ID=0

# Auth (recommended): one shared secret for Go â†” Java HMAC
PAY_GATEWAY_SHARED_SECRET=change-me
# PAY_GATEWAY_SHARED_SECRET_PREV=
PAY_GATEWAY_SHARED_AUTH_REQUIRED=true
# Optional: tighten/loosen skew & nonce TTL
# PAY_GATEWAY_SHARED_AUTH_CLOCK_SKEW_SECONDS=300
# PAY_GATEWAY_SHARED_AUTH_NONCE_TTL_SECONDS=300

# Legacy token auth (optional / transition only)
# PAY_GATEWAY_API_AUTH_TOKEN=change-me

PAY_GATEWAY_JAVA_WEBHOOK_URL=http://java.internal/pay/events
# Legacy webhook token (optional / transition only)
# PAY_GATEWAY_JAVA_WEBHOOK_TOKEN=change-me
# When true, callbacks are enqueued to Redis and delivered async by a worker.
# PAY_GATEWAY_JAVA_WEBHOOK_ASYNC=true
# PAY_GATEWAY_JAVA_WEBHOOK_CONSUMER_GROUP=pay-gateway

# Optional: merchant config snapshot pull (Go -> Java)
# PAY_GATEWAY_MERCHANT_SNAPSHOT_URL=http://java.internal/internal/pay-gateway/merchants/snapshot
# PAY_GATEWAY_MERCHANT_POLL_INTERVAL_SECONDS=60
# Optional: Redis stream trigger (best-effort fast path, polling is the baseline)
# PAY_GATEWAY_MERCHANT_CHANGE_STREAM=pay-gateway:merchant-config-changed
# PAY_GATEWAY_MERCHANT_CHANGE_GROUP=pay-gateway-config

# redis (recommended for prod idempotency/dedup)
PAY_GATEWAY_REDIS_ADDR=redis:6379
PAY_GATEWAY_REDIS_PASSWORD=
PAY_GATEWAY_REDIS_DB=0
PAY_GATEWAY_REDIS_KEY_PREFIX=pay-gateway:
